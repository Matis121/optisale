<% content_for :title, "Dostępne integracje" %>
<%= render "shared/integrations_tabs" %>
<%= render Ui::Layout::Container::DefaultComponent.new do %>
  <div class="flex items-center justify-between mb-6">
    <div class="text-sm breadcrumbs text-base-content/60">
      <ul>
        <li>Lista integracji (<%= @integrations.count %>)</li>
      </ul>
    </div>
  </div>
  <% grouped = @integrations.group_by(&:integration_type) %>
  <% type_config = {
    "invoicing" => { label: "Systemy fakturowania", icon: "fa-file-invoice-dollar" },
    "marketplace" => { label: "Platformy sprzedażowe", icon: "fa-store" },
    "shipping" => { label: "Kurierzy i logistyka", icon: "fa-truck" }
  } %>
  <% if grouped.any? %>
    <div class="space-y-10">
      <% type_config.each do |type, config| %>
        <% next unless grouped[type].present? %>
        <%= render "integrations/integration_section", 
                   integrations: grouped[type], 
                   config: config %>
      <% end %>
    </div>
  <% else %>
    <div class="text-center py-12">
      <div class="w-16 h-16 bg-base-200 rounded-full flex items-center justify-center mx-auto mb-4">
        <i class="fas fa-box-open text-2xl opacity-40"></i>
      </div>
      <p class="text-base-content/60">Brak dostępnych integracji.</p>
    </div>
  <% end %>
<% end %>
